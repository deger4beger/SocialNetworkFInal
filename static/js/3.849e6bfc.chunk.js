(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{227:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s(7),r=s(110),i=s(111),o=s(113),a=s(112),c=s(1),j=s(16),u=s(0),l=s.n(u),b=s(12),d=function(e){return{isAuth:e.auth.isAuth}},h=function(e){var t=function(t){Object(o.a)(u,t);var s=Object(a.a)(u);function u(){return Object(r.a)(this,u),s.apply(this,arguments)}return Object(i.a)(u,[{key:"render",value:function(){return this.props.isAuth?Object(c.jsx)(e,Object(n.a)({},this.props)):Object(c.jsx)(j.a,{to:"/login"})}}]),u}(l.a.Component);return Object(b.b)(d)(t)}},229:function(e,t,s){e.exports={userPhoto:"ProfileInfo_userPhoto__2fG__",info:"ProfileInfo_info__187jL",preloader:"ProfileInfo_preloader__2S6ny",statusText:"ProfileInfo_statusText__2o2n8",changePhoto:"ProfileInfo_changePhoto__1bCl_"}},230:function(e,t,s){},231:function(e,t,s){e.exports={posts:"MyPosts_posts__3SvE1",form:"MyPosts_form__1m0Bw",formArea:"MyPosts_formArea__1MA4c",addPostButton:"MyPosts_addPostButton__3fj7U",title:"MyPosts_title__29o0u"}},232:function(e,t,s){e.exports={item:"Post_item__2UTyE",avaMessage:"Post_avaMessage__YA09U",message:"Post_message__5vz0e",like:"Post_like__wEx_S"}},235:function(e,t,s){"use strict";s.r(t);var n=s(7),r=s(110),i=s(111),o=s(113),a=s(112),c=s(1),j=s(0),u=s.n(j),l=(s(230),s(116)),b=s(231),d=s.n(b),h=s(232),p=s.n(h);var f=function(e){return Object(c.jsxs)("div",{className:p.a.item,children:[Object(c.jsxs)("div",{className:p.a.avaMessage,children:[Object(c.jsx)("div",{className:p.a.ava,children:Object(c.jsx)("img",{src:"https://img3.goodfon.ru/original/2278x1312/1/ae/james-cameron-avatar-neytiri.jpg"})}),Object(c.jsx)("div",{className:p.a.message,children:e.message})]}),Object(c.jsxs)("div",{className:p.a.like,children:[Object(c.jsx)("span",{children:e.likesCount}),Object(c.jsx)("span",{children:" like"})]})]})},O=s(64),x=s(81),v=s(114),m=Object(v.a)("textarea"),g=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return function(e){return t.reduce((function(t,s){return t||s(e)}),void 0)}},P=Object(x.a)(10);function _(e){return Object(c.jsx)(O.b,{onSubmit:e.onSubmit,children:function(e){var t=e.handleSubmit;return Object(c.jsx)("form",{onSubmit:t,children:Object(c.jsxs)("div",{className:d.a.form,children:[Object(c.jsx)("div",{children:Object(c.jsx)(O.a,{className:d.a.formArea,name:"postText",component:m,placeholder:"Start typing",validate:g(x.b,P)})}),Object(c.jsx)("button",{className:d.a.addPostButton,children:"Add post"})]})})}})}var k=function(e){var t=e.posts.map((function(e){return Object(c.jsx)(f,{message:e.message,likesCount:e.likesCount},e.id)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{className:d.a.title,children:"My posts"}),Object(c.jsx)("div",{children:Object(c.jsx)(_,{onSubmit:function(t){e.addPost(t.postText)}})}),Object(c.jsx)("div",{className:d.a.posts,children:t})]})},y=s(12),S=Object(y.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(Object(l.a)(t))}}}))(k),M=s(115),A=s(229),N=s.n(A),F=s(82),w=s(128),C=function(e){var t=Object(j.useState)(!1),s=Object(M.a)(t,2),n=s[0],r=s[1],i=Object(j.useState)(e.status),o=Object(M.a)(i,2),a=o[0],u=o[1];Object(j.useEffect)((function(){u(e.status)}),[e.status]);return Object(c.jsx)("div",{children:n?Object(c.jsx)("div",{children:Object(c.jsx)("input",{value:a,onBlur:function(){r(!1),e.updateStatus(a)},autoFocus:!0,onChange:function(e){u(e.target.value)}})}):Object(c.jsx)("div",{className:N.a.statusText,children:Object(c.jsx)("span",{onDoubleClick:function(){r(!0)},children:e.status||"-----"})})})},I=Object(v.a)("input"),T=Object(v.a)("textarea"),U=Object(x.a)(40),J=function(e){var t=e.profile,s=e.onSubmit;return Object(c.jsx)(O.b,{onSubmit:s,initialValues:t,children:function(e){var s=e.handleSubmit;return Object(c.jsx)("form",{onSubmit:s,children:Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:Object(c.jsx)("button",{children:"save"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Full name:"})," ",Object(c.jsx)(O.a,{placeholder:"Full name",name:"fullName",component:I,validate:x.b})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Looking for a job:"})," ",Object(c.jsx)(O.a,{name:"lookingForAJob",component:I,type:"checkbox"})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"My professional skills"})," ",Object(c.jsx)(O.a,{name:"lookingForAJobDescription",component:T,placeholder:"My professional skills",validate:U})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"About me:"})," ",Object(c.jsx)(O.a,{name:"aboutMe",component:T,placeholder:"About me"})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Contacts:"})," ",Object.keys(t.contacts).map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("b",{children:[e,":"]})," ",Object(c.jsx)(O.a,{placeholder:e,name:"contacts."+e,component:I})]},e)}))]})]})})}})};var E=function(e){var t=e.profile,s=e.isOwner,n=e.goToEditMode;return Object(c.jsxs)("div",{children:[s&&Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:n,children:"edit"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Full name:"})," ",t.fullName]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Looking for a job:"})," ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"My professional skills"})," ",t.lookingForAJobDescription]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"About me:"})," ",t.aboutMe]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:"Contacts:"})," ",Object.keys(t.contacts).map((function(e){return Object(c.jsx)(B,{title:e,value:t.contacts[e]},e)}))]})]})},B=function(e){var t=e.title,s=e.value;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("b",{children:[t,":"]})," ",s]})},D=function(e){var t=e.profile,s=Object(j.useState)(!1),n=Object(M.a)(s,2),r=n[0],i=n[1];return e.isFetching||!t?Object(c.jsx)("div",{className:N.a.preloader,children:Object(c.jsx)(F.a,{})}):Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:N.a.info,children:[Object(c.jsx)("img",{src:t.photos.large?t.photos.large:w.a,className:N.a.userPhoto}),e.isOwner&&Object(c.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])},className:N.a.changePhoto}),Object(c.jsx)(C,{status:e.status,updateStatus:e.updateStatus}),e.errorMessage?Object(c.jsx)("div",{children:e.errorMessage}):"",r?Object(c.jsx)(J,{profile:t,onSubmit:function(t){e.saveProfile(t).then((function(){return i(!1)}))}}):Object(c.jsx)(E,{profile:t,isOwner:e.isOwner,goToEditMode:function(){return i(!0)}})]})})};var L=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(D,{profile:e.profile,isFetching:e.isFetching,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile,errorMessage:e.errorMessage}),Object(c.jsx)(S,{})]})},z=s(16),G=s(227),V=s(58),Y=function(e){Object(o.a)(s,e);var t=Object(a.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.AuthUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(c.jsx)(L,Object(n.a)(Object(n.a)({},this.props),{},{profile:this.props.profile,isFetching:this.props.isFetching,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile,errorMessage:this.props.errorMessage}))}}]),s}(u.a.Component);t.default=Object(V.d)(Object(y.b)((function(e){return{profile:e.profilePage.profile,isFetching:e.profilePage.isFetching,status:e.profilePage.status,AuthUserId:e.auth.id,isAuth:e.auth.isAuth,errorMessage:e.profilePage.errorMessage}}),{getUserProfile:l.d,getStatus:l.c,updateStatus:l.g,savePhoto:l.e,saveProfile:l.f}),z.h,G.a)(Y)}}]);
//# sourceMappingURL=3.849e6bfc.chunk.js.map